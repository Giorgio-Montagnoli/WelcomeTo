@model WelcomeTo.Models.ViewModels.GameVM
@{
    ViewBag.Title = "Partita";
}

<br/>
<div class="tab-content">
    <ul class="nav nav-pills">
        <li class="active"><a data-toggle="pill" href="#home">Game</a></li>
        <li><a data-toggle="pill" href="#menu1">Projects</a></li>
    </ul>
    <br />
    <div class="tab-pane fade in active" id="home">
        <div class="panel panel-info">
            <div class="panel-heading">Game</div>
            <div class="panel-body">
                <div id="gameCont">
                    @Html.Partial("GameCards", Model)
                </div>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="menu1">
        <div class="panel panel-info">
            <div class="panel-heading">Projects</div>
            <div class="panel-body">
                <div id="div_projects">
                    @Html.Partial("PopoverPojects", Model.ProjectCards)
                </div>
            </div>
        </div>
    </div>
</div>

<br />
<div class="row">
    <div class="col-md-12 text-center">
        <input id="nextDraw" type="button" class="btn btn-primary" value="Pesca" />
    </div>
</div>

@section scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            $("#nextDraw").click(function () {
                $.ajax({
                    method: "get",
                    url: "@Url.Action("DrawAsync", "Home")"
                }).done(function (result) {
                    $("#gameCont").empty();
                    $("#gameCont").html(result);
                });
            });
        });
        
        function ApproveProject(projectSelected){
            $.ajax({
                method: "get",
                url: "@Url.Action("CompleteProjectAsync", "WelcomeTo")",
                data: { idproject: projectSelected }
                }).done(function (result) {
                    $("#div_projects").empty();
                    $("#div_projects").html(result);
                });
            };
    </script>    
}
